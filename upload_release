#!/bin/bash

bin="./target/aarch64-tx2/release"
tftp="root@192.168.106.153:/tftp"

aarch64-elf-objcopy ${bin}/rust_hypervisor -O binary ${bin}/shyper.bin
# gzip ${bin}/shyper.bin
mkimage -n shyper -A arm64 -O linux -T kernel -C none -a 0x83000000 -e 0x83000000 \
-d ${bin}/shyper.bin ${bin}/shyperImage
# rm ${bin}/shyper.bin.gz
echo "*** Upload Image ***"

scp ${bin}/shyperImage ${tftp}/HkyRustImage
# # scp ${bin}/shyper.bin ${tftp}/shyper.bin
# scp ${bin}/rust_hypervisor ${tftp}/shyper13.elf